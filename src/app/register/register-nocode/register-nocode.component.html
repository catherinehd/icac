<app-header></app-header>
<app-navbar></app-navbar>

<section class="register-sec wrap-box">
  <div class="register-box">
    <div class="title">
      ChinaICAC Member registration
    </div>

    <div class="main form" [formGroup]="registerForm">
      <div class="form-field">
        <label class="name form-label">
          You work for
        </label>
        <span>
          <select formControlName="work" (change)="showErr('work')">
             <option value="" disabled>
              Please select
            </option>
            <option value="0">
              Secondary／High School
            </option>
            <option value="1">
              Colllege or University
            </option>
          </select>
          <div class="wrong" *ngIf="errWork">
            <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
            <span>{{errWork}}</span>
          </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Email
        </label>
        <span>
          <input placeholder="Please enter" formControlName="email" type="email" (keyup)="showErr('email')">
          <div class="wrong" *ngIf="errEmail">
            <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
            <span>{{errEmail}}</span>
          </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Verification Code
        </label>
        <span>
          <input placeholder="Please enter" formControlName="code" type="text" (blur)="showErr('code')">
          <button class="obtain" [disabled]="!registerForm.value.email || errEmail" (click)="getCode()"><span *ngIf="!isCounting">Obtain</span><span *ngIf="isCounting">{{count}}</span></button>
          <div class="wrong" *ngIf="errCode">
            <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
            <span>{{errCode}}</span>
          </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Password
        </label>
        <span>
          <input placeholder="Please enter" formControlName="pwd1" [type]="!isOpenEyesShow1 ? 'text' : 'password'" (blur)="showErr('pwd1')" maxlength="15">
          <div class="btn-group">
            <button class="eye-btn" *ngIf="!isOpenEyesShow1" (click)="isOpenEyesShow1 = true">
              <img class="icon-open-eyes" src="../../../assets/icon/open.svg" />
            </button>
            <button class="eye-btn" *ngIf="isOpenEyesShow1" (click)="isOpenEyesShow1 = false">
              <img class="icon-close-eyes" src="../../../assets/icon/hidden.svg" />
            </button>
          </div>
          <div class="wrong" *ngIf="errPwd1">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errPwd1}}</span>
        </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Repeat password
        </label>
        <span>
          <input placeholder="Please enter" formControlName="pwd2" [type]="!isOpenEyesShow2 ? 'text' : 'password'" (blur)="showErr('pwd2')" maxlength="15">
          <div class="btn-group">
            <button class="eye-btn" *ngIf="!isOpenEyesShow2" (click)="isOpenEyesShow2 = true" >
              <img class="icon-open-eyes" src="../../../assets/icon/open.svg" />
            </button>
            <button class="eye-btn"*ngIf="isOpenEyesShow2" (click)="isOpenEyesShow2 = false" >
              <img class="icon-close-eyes" src="../../../assets/icon/hidden.svg" />
            </button>
          </div>
          <div class="wrong" *ngIf="errPwd2">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errPwd2}}</span>
        </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Prefix
        </label>
        <span>
          <select formControlName="prefix" (change)="showErr('prefix')">
            <option value="" disabled>
              Please select
            </option>
            <option value="Dr">
              Dr.
            </option>
            <option value="Mr">
              Mr.
            </option>
            <option value="Mrs">
              Mrs.
            </option>
            <option value="Ms">
              Ms.
            </option>
            <option value="Rev">
              Rev.
            </option>
          </select>
          <div class="wrong" *ngIf="errPrefix">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errPrefix}}</span>
        </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>First Name
        </label>
        <span>
          <input placeholder="Please enter" formControlName="firstname" (blur)="showErr('fname')">
          <div class="wrong" *ngIf="fname">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{fname}}</span>
        </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Last Name
        </label>
        <span>
          <input placeholder="Please enter" formControlName="lastname" (blur)="showErr('lname')">
          <div class="wrong" *ngIf="lname">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{lname}}</span>
        </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          Preferred Name
        </label>
        <span>
          <input placeholder="Please enter" formControlName="preferredname">
          <div class="optional">(Optional)</div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>School
        </label>
        <span>
          <input placeholder="Please enter" formControlName="school" (blur)="showErr('school')">
          <div class="wrong" *ngIf="errSchool">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errSchool}}</span>
          </div>
        </span>
      </div>
      <div class="form-field">
        <label class="name">
          <span>*</span>Job Title
        </label>
        <span>
          <input placeholder="Please enter" formControlName="jobtitle" (blur)="showErr('job')">
          <div class="wrong" *ngIf="errJob">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errJob}}</span>
          </div>
        </span>
      </div>
      <div class="form-field" *ngIf="highschool">
        <label class="name">
          <span>*</span>Reference Name
        </label>
        <span>
          <input placeholder="Please enter" formControlName="rename" (blur)="showErr('rename')">
          <div class="wrong" *ngIf="errname">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errname}}</span>
          </div>
        </span>
      </div>
      <div class="form-field" *ngIf="highschool">
        <label class="name">
          <span>*</span>Reference Institution
        </label>
        <span>
          <input placeholder="Please enter" formControlName="reins" (blur)="showErr('reins')">
          <div class="wrong" *ngIf="errins">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errins}}</span>
          </div>
        </span>
      </div>
      <div class="form-field" *ngIf="highschool">
        <label class="name">
          <span>*</span>Reference Email
        </label>
        <span>
          <input placeholder="Please enter" formControlName="remail" (blur)="showErr('remail')">
          <div class="wrong" *ngIf="errremail">
          <img class="wromg-img" src="../../../assets/icon/wrong.svg" />
          <span>{{errremail}}</span>
          </div>
        </span>
      </div>


      <div class="no-ceeb" (click)="go('./register')" *ngIf="highschool">
        已有CEEB Code？
      </div>
      <div class="agreement form-field" id="agreement">
        <input type="checkbox" id="agreement-input" formcontrolname="agreement" (click)="ischecked()">
        <label class="agreement-title" for="agreement-input">
          I own membership of InternationalACAC.
        </label>
      </div>

      <div class="submit" *ngIf="highschool">
        <button type="button" [disabled]="!this.registerForm.value.work || !this.registerForm.value.email || !this.registerForm.value.code || !this.registerForm.value.pwd1 || !this.registerForm.value.pwd2 || !this.registerForm.value.prefix || !this.registerForm.value.firstname || !this.registerForm.value.lastname || !this.registerForm.value.school || !this.registerForm.value.jobtitle || !this.registerForm.value.rename || !this.registerForm.value.reins || !this.registerForm.value.remail || !checkAgreement"   (click)="onSubmit()">
          Submit
        </button>
      </div>
      <div class="submit" *ngIf="!highschool">
        <button type="button" [disabled]="!this.registerForm.value.work || !this.registerForm.value.email || !this.registerForm.value.code || !this.registerForm.value.pwd1 || !this.registerForm.value.pwd2 || !this.registerForm.value.prefix || !this.registerForm.value.firstname || !this.registerForm.value.lastname || !this.registerForm.value.school || !this.registerForm.value.jobtitle || !checkAgreement"   (click)="onSubmit()">
          Submit
        </button>
      </div>

    </div>
  </div>
</section>

<section class="prompt-box" *ngIf="prompt">
  <div class="prompt">
    <div class="title">
      PROMPT
    </div>
    <div class="detail">
      <p>Your information has been submitted to the background audit, and it is expected that within 24 hours the audit results will be sent to your mailbox {{this.registerForm.value.email}}, please note that check.</p>
      <button (click)="go('./home')">
        OK, return to homepage
      </button>
    </div>
  </div>
</section>
